title: "tf 一些问题整理"
date: 2015-05-06 21:56:08
categories: 技术
tags: [vs]
---
    之前团队中使用tfs进行版本和其它的管理，由于自己的电脑是被人用的，例如改名什么的，按照自己的习惯重新配置了不可避免，所以记录了一下遇到的问题

<!--more-->
我使用的是离职的同事的电脑，重新配置环境又是很麻烦的事情，但是还是需要自己按照自己的习惯进行重新配置。

## TFS的工作区问题
之前tfs使用的上一个人的用户名，所以自己在server上建立了一个自己的账户，并删除了之前的账户，这引起了工作区找不到的问题。

这个问题到时解决的很简单，自己从新在本机的其它目录把内容再签出一遍就可以了，当然是用的是我的用户名链接的tfs服务器，签出时见了一个新的工作区。


之后自己觉得自己的电脑名真是不好记忆就改了名字，嗯，不错，又出问题了。

改名字后，重启电脑之前新的账户签出的工作区又不能使用了，在vs2012 启动的时候就提示工作区 “pc***;成金”不可用，这块很疑惑，pc名出问题还罢了，怎么用户名都改了很长时间了还在？这个人的内容我早都干掉了啊？如果这样考虑的话，那么就是之前这个人建立的一个东西，这样的话，只有工作区可以说的通了,网上查了查，说要使用如下的命令来更新一下命名过电脑的工作区：
    >tf workspaces /updateComputerName:[oldcomputername] /collection:http://xx.xx.xx.xx/tfs/product

上面的[oldcomputername]是改之前的电脑名字，这个在启动本地连接tfs时，提示出错的名字，这个名字当时没记住才改的，只能靠提示出错来抄录了；上面的命令最终还是没有解决，虽然更新成功了，但是连接还是出错，这个可能不是这块的问题了，自己刚好查看了tf命令行关于`workspaces`参数，发现了`remove`于是想着，现在还是不能理解一些概念，直接清空现在的配置重新开始，于是我干下面的操作：
    >tf workspaces /remove:*

执行了之后，发现命令删除了两个工作区，一个是之前的一个人，另一个是我的工作区，但是我的工作区的电脑名字却是新的（上面更新了一次），这个完全就不知道了，因为添加工作区的时候提示已经存在工作区，但是工作区列表显示不出来。别人的那个工作区就是旧的pc名和用户名组成的工作区名。
![命令行截图](/pics/tfs_remove_workspaces.jpeg)
### 总结
至此，问题终于变成可控了，从新建立工作区，签出代码，一切都美好了。

## TFS管理的工程去掉版本信息
由于tfs与微软的产品关联很大、不够轻量级、且使用的时候需要打开vs这个大家伙，所以把版本管理换成了svn，使用了visualsvn做的服务器，真是非常简单，总共从安装到上手没有半个小时，tfs学习后不能通用，且配置复杂，我陪了一次用户添加，没有头绪，之后再没有关注这个东西，虽然tfs平台挺好，但是不可控因素太多了。

tfs进行控制使用了两个方面的内容进行控制对项目工程：
    1. 单独tfs控制文件。
    2. 文件内的控制信息：sln文件内控制信息、proj文件中控制信息。

下面就进行怎么清楚：
    1. 单独项目文件直接干掉，例如：.vssscc文件（还有其他的文件）
    2. .sln文件中需要删除手动删除或者注释掉GlobalSection(TeamFoundationVersionControl) 节点
    3. .csproj文件中需要把聚集在一块的<SCC>节点都删除或者注释掉

以上问题解决之后，vs就不会提示你tfs的错误了，如果删除文件内的内容不能生效的话，你需要重启一下vs，当时就有一个proj文件的不能载入问题被这样解决了。
